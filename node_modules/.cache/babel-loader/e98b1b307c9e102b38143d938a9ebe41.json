{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\gabri\\\\Documents\\\\GitHub\\\\estacao-solar\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\gabri\\\\Documents\\\\GitHub\\\\estacao-solar\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\gabri\\\\Documents\\\\GitHub\\\\estacao-solar\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\gabri\\\\Documents\\\\GitHub\\\\estacao-solar\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\gabri\\\\Documents\\\\GitHub\\\\estacao-solar\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\gabri\\\\Documents\\\\GitHub\\\\estacao-solar\\\\src\\\\views\\\\Home.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Camera } from '../components/Camera.js';\nimport { Header } from '../components/Header.js';\nimport { UVIndex } from '../components/UVIndex.js'; //import { Switch } from '../components/switch.js';\n\nimport { TempHumi } from '../components/TempHumi.js';\nimport { SunriseSunset } from '../components/SunriseSunset.js';\nimport { WeatherForecast } from '../containers/WeatherForecast.js';\nexport var Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      //constantes para o component TempHumi.js\n      temperaturaClimatempo: null,\n      umidadeClimatempo: null,\n      temperaturaSEL: null,\n      umidadeSEL: null,\n      uvSEL: null,\n      chuvaSEL: null,\n      //constantes para o component SunriseSunset.js\n      nascerDoSol: null,\n      porDoSol: null,\n      duracaoDoDia: null,\n      //constantes para o component Gate.js\n      isGateOpen: null,\n      isRaining: null,\n      ExpositionTime: null\n    };\n\n    _this.requestClimatempo = function () {\n      //Fetch da API do Climatempo\n      axios.get('http://apiadvisor.climatempo.com.br/api/v1/weather/locale/3680/current?token=2e30b5793b0c662d9b901520663bd4d0').then(function (response) {\n        console.log(response.data);\n\n        _this.setState({\n          temperaturaClimatempo: response.data.data.temperature + '°C',\n          umidadeClimatempo: response.data.data.humidity + '%'\n        });\n\n        _this.updateWidgets();\n      }).catch(function (error) {\n        console.log('erro com o request do climatempo');\n        console.log(error);\n      });\n      setTimeout(_this.requestClimatempo, 1000 * 60 * 5);\n    };\n\n    _this.requestLioSensors = function () {\n      //Fetch da API do liosensors\n      axios.get('http://www.sel.eesc.usp.br/liosensors/json_data.php').then(function (response) {\n        console.log(response.data);\n\n        _this.setState({\n          temperaturaSEL: response.data.lastTemp + '°C',\n          umidadeSEL: response.data.lastHum + '%',\n          uvSEL: Math.round(response.data.lastUV),\n          chuvaSEL: response.data.Rain\n        });\n\n        _this.updateWidgets();\n      }).catch(function (error) {\n        console.log('erro com o request dos nossos sensores na SEL');\n        console.log(error);\n      });\n      setTimeout(_this.requestLioSensors, 1000 * 30);\n    };\n\n    _this.requestSunriseSunsetTime = function () {\n      //utilizando o método get para pegar os dados da API da Beaglebone da SEL\n      axios.get('http://143.107.235.2:8000/sensors/data/').then(function (response) {\n        console.log(response.data);\n\n        _this.setState({\n          nascerDoSol: response.data.sensors[0].local.sunrise.slice(10, 19),\n          porDoSol: response.data.sensors[0].local.sunset.slice(10, 19),\n          duracaoDoDia: response.data.sensors[0].local.time.slice(10, 19)\n        });\n\n        _this.updateWidgets(response.data.sensors[0].open, _this.checkDaytime(), response.data.sensors[0].rain, response.data.sensors[0].ExpositionTime);\n      }).catch(function (error) {\n        console.log('erro com o request do 143.107.235.2:8000');\n        console.log(error);\n      });\n      setTimeout(_this.requestSunriseSunsetTime, 30 * 1000);\n    };\n\n    _this.requestTodayWeatherForecast = function () {\n      //utilizando o método get para pegar os dados da API do climatempo\n      axios.get('http://apiadvisor.climatempo.com.br/api/v1/forecast/locale/3680/days/15?token=2e30b5793b0c662d9b901520663bd4d0').then(function (response) {\n        console.log(response.data);\n\n        _this.setState({\n          //constantes de informação geral\n          cidade: response.data.name,\n          frase: response.data.data[0].text_icon.text.pt,\n          //constantes do primeiro dia, hoje\n          data: response.data.data[0].date_br,\n          iconManha: \"../images/\" + response.data.data[0].text_icon.icon.morning + \".png\",\n          iconTarde: \"../images/\" + response.data.data[0].text_icon.icon.afternoon + \".png\",\n          iconNoite: \"../images/\" + response.data.data[0].text_icon.icon.night + \".png\",\n          probabilidadeChuva: response.data.data[0].rain.probability,\n          precipitacaoChuva: response.data.data[0].rain.precipitation,\n          temperaturaMin: response.data.data[0].temperature.min,\n          temperaturaMax: response.data.data[0].temperature.max,\n          umidadeMin: response.data.data[0].humidity.min,\n          umidadeMax: response.data.data[0].humidity.max,\n          ventoMin: response.data.data[0].wind.velocity_min,\n          ventoMax: response.data.data[0].wind.velocity_max\n        });\n      }).catch(function (error) {\n        console.log('erro com o request da previsão do tempo do climatempo');\n        console.log(error);\n      });\n      setTimeout(_this.todayWeatherForecast, 1000 * 60 * 60);\n\n      _this.forceUpdate();\n    };\n\n    _this.checkDaytime = function () {\n      var timeNow = new Date(); //verificamos se a hora está entre a hora do nascer do sol e a hora do por do sol\n\n      if (timeNow.getHours() > _this.state.nascerDoSol.slice(0, 3) && timeNow.getHours() < _this.state.porDoSol.slice(0, 3)) {\n        return true;\n      } //verificamos se a hora é igual a hora do nascer do sol\n\n\n      if (timeNow.getHours() === _this.state.nascerDoSol.slice(0, 3)) {\n        //verificamos se o minuto é maior ou igual o minuto do nascer do sol\n        if (timeNow.getMinutes() > _this.state.nascerDoSol.slice(4, 6)) {\n          return true;\n        } //caso o minuto seja igual, verificamos os segundos\n\n\n        if (timeNow.getMinutes() === _this.state.nascerDoSol.slice(4, 6)) {\n          //caso o segundo seja maior ou igual\n          if (timeNow.getSeconds() >= _this.state.nascerDoSol.slice(7, 9)) {\n            return true;\n          } //caso o segundo seja menor\n\n\n          if (timeNow.getSeconds() < _this.state.nascerDoSol.slice(7, 9)) {\n            return false;\n          }\n        } //caso o minuto seja menor que o do nascer do sol\n\n\n        if (timeNow.getMinutes() < _this.state.nascerDoSol.slice(4, 6)) {\n          return false;\n        }\n      } //verificamos se a hora é igual a hora do por do sol\n\n\n      if (timeNow.getHours() === _this.state.porDoSol.slice(0, 3)) {\n        //verificamos se o minuto é menor ou igual o minuto do nascer do sol\n        if (timeNow.getMinutes() < _this.state.porDoSol.slice(4, 6)) {\n          return true;\n        } //caso o minuto seja igual, verificamos os segundos\n\n\n        if (timeNow.getMinutes() === _this.state.porDoSol.slice(4, 6)) {\n          //caso o segundo seja maior ou igual\n          if (timeNow.getSeconds() <= _this.state.porDoSol.slice(7, 9)) {\n            return true;\n          } //caso o segundo seja menor\n\n\n          if (timeNow.getSeconds() > _this.state.porDoSol.slice(7, 9)) {\n            return false;\n          }\n        } //caso o minuto seja maior que o do nascer do sol\n\n\n        if (timeNow.getMinutes() > _this.state.porDoSol.slice(4, 6)) {\n          return false;\n        }\n      } //verificamos se a hora é menor que a hora do nascer do sol ou maior que a hora do por do sol\n\n\n      if (timeNow.getHours() < _this.state.nascerDoSol.slice(0, 3) || timeNow.getHours() > _this.state.porDoSol.slice(0, 3)) {\n        return false;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.requestClimatempo();\n      this.requestLioSensors();\n      this.requestSunriseSunsetTime();\n      this.requestTodayWeatherForecast();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"left-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(TempHumi, {\n        temperaturaClimatempo: this.state.temperaturaClimatempo,\n        umidadeClimatempo: this.state.umidadeClimatempo,\n        temperaturaSEL: this.state.temperaturaSEL,\n        umidadeSEL: this.state.umidadeSEL,\n        chuvaSEL: this.state.chuvaSEL,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }), React.createElement(WeatherForecast, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(SunriseSunset, {\n        nascerDoSol: this.state.nascerDoSol,\n        porDoSol: this.state.porDoSol,\n        duracaoDoDia: this.state.duracaoDoDia,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Home;\n}(React.Component);","map":{"version":3,"sources":["C:\\Users\\gabri\\Documents\\GitHub\\estacao-solar\\src\\views\\Home.js"],"names":["React","axios","Camera","Header","UVIndex","TempHumi","SunriseSunset","WeatherForecast","Home","state","temperaturaClimatempo","umidadeClimatempo","temperaturaSEL","umidadeSEL","uvSEL","chuvaSEL","nascerDoSol","porDoSol","duracaoDoDia","isGateOpen","isRaining","ExpositionTime","requestClimatempo","get","then","response","console","log","data","setState","temperature","humidity","updateWidgets","catch","error","setTimeout","requestLioSensors","lastTemp","lastHum","Math","round","lastUV","Rain","requestSunriseSunsetTime","sensors","local","sunrise","slice","sunset","time","open","checkDaytime","rain","requestTodayWeatherForecast","cidade","name","frase","text_icon","text","pt","date_br","iconManha","icon","morning","iconTarde","afternoon","iconNoite","night","probabilidadeChuva","probability","precipitacaoChuva","precipitation","temperaturaMin","min","temperaturaMax","max","umidadeMin","umidadeMax","ventoMin","wind","velocity_min","ventoMax","velocity_max","todayWeatherForecast","forceUpdate","timeNow","Date","getHours","getMinutes","getSeconds","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\n\r\nimport { Camera } from '../components/Camera.js';\r\nimport { Header } from '../components/Header.js';\r\nimport { UVIndex } from '../components/UVIndex.js';\r\n//import { Switch } from '../components/switch.js';\r\nimport { TempHumi } from '../components/TempHumi.js';\r\nimport { SunriseSunset } from '../components/SunriseSunset.js';\r\nimport { WeatherForecast } from '../containers/WeatherForecast.js';\r\n\r\nexport class Home extends React.Component {\r\n  state = {\r\n    //constantes para o component TempHumi.js\r\n    temperaturaClimatempo: null,\r\n    umidadeClimatempo: null,\r\n    temperaturaSEL: null,\r\n    umidadeSEL: null,\r\n    uvSEL: null,\r\n    chuvaSEL: null,\r\n    //constantes para o component SunriseSunset.js\r\n    nascerDoSol: null,\r\n    porDoSol: null,\r\n    duracaoDoDia: null,\r\n    //constantes para o component Gate.js\r\n    isGateOpen: null,\r\n    isRaining: null,\r\n    ExpositionTime: null\r\n  }\r\n  requestClimatempo = () => {\r\n  //Fetch da API do Climatempo\r\n    axios.get('http://apiadvisor.climatempo.com.br/api/v1/weather/locale/3680/current?token=2e30b5793b0c662d9b901520663bd4d0')\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.setState(\r\n          {\r\n            temperaturaClimatempo: response.data.data.temperature + '°C',\r\n            umidadeClimatempo: response.data.data.humidity + '%',\r\n          }\r\n        );\r\n        this.updateWidgets();\r\n      })\r\n      .catch(error => {\r\n        console.log('erro com o request do climatempo');\r\n        console.log(error);\r\n      });\r\n      setTimeout(this.requestClimatempo, 1000*60*5);\r\n  }\r\n  requestLioSensors = () => {\r\n    //Fetch da API do liosensors\r\n    axios.get('http://www.sel.eesc.usp.br/liosensors/json_data.php')\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.setState(\r\n          {\r\n            temperaturaSEL: response.data.lastTemp + '°C',\r\n            umidadeSEL: response.data.lastHum + '%',\r\n            uvSEL: Math.round(response.data.lastUV),\r\n            chuvaSEL: response.data.Rain\r\n          }\r\n        );\r\n        this.updateWidgets();\r\n      })\r\n      .catch(error => {\r\n        console.log('erro com o request dos nossos sensores na SEL');\r\n        console.log(error);\r\n      })\r\n      setTimeout(this.requestLioSensors, 1000*30);\r\n  }\r\n  requestSunriseSunsetTime = () => {\r\n    //utilizando o método get para pegar os dados da API da Beaglebone da SEL\r\n    axios.get('http://143.107.235.2:8000/sensors/data/')\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.setState(\r\n          {\r\n            nascerDoSol: response.data.sensors[0].local.sunrise.slice(10,19),\r\n            porDoSol: response.data.sensors[0].local.sunset.slice(10,19),\r\n            duracaoDoDia: response.data.sensors[0].local.time.slice(10,19)\r\n          }\r\n        );\r\n        this.updateWidgets(response.data.sensors[0].open, this.checkDaytime(), response.data.sensors[0].rain, response.data.sensors[0].ExpositionTime);\r\n      })\r\n      .catch(error => {\r\n        console.log('erro com o request do 143.107.235.2:8000');\r\n        console.log(error);\r\n      })\r\n    setTimeout(this.requestSunriseSunsetTime, 30*1000);\r\n  }\r\n  requestTodayWeatherForecast = () =>{\r\n    //utilizando o método get para pegar os dados da API do climatempo\r\n    axios.get('http://apiadvisor.climatempo.com.br/api/v1/forecast/locale/3680/days/15?token=2e30b5793b0c662d9b901520663bd4d0')\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.setState(\r\n          {\r\n            //constantes de informação geral\r\n            cidade: response.data.name,\r\n            frase: response.data.data[0].text_icon.text.pt,\r\n            //constantes do primeiro dia, hoje\r\n            data: response.data.data[0].date_br,\r\n            iconManha: \"../images/\" + response.data.data[0].text_icon.icon.morning + \".png\",\r\n            iconTarde: \"../images/\" + response.data.data[0].text_icon.icon.afternoon + \".png\",\r\n            iconNoite: \"../images/\" + response.data.data[0].text_icon.icon.night + \".png\",\r\n            probabilidadeChuva: response.data.data[0].rain.probability,\r\n            precipitacaoChuva: response.data.data[0].rain.precipitation,\r\n            temperaturaMin: response.data.data[0].temperature.min,\r\n            temperaturaMax: response.data.data[0].temperature.max,\r\n            umidadeMin: response.data.data[0].humidity.min,\r\n            umidadeMax: response.data.data[0].humidity.max,\r\n            ventoMin: response.data.data[0].wind.velocity_min,\r\n            ventoMax: response.data.data[0].wind.velocity_max,\r\n          }\r\n        );\r\n      })\r\n      .catch(error => {\r\n        console.log('erro com o request da previsão do tempo do climatempo');\r\n        console.log(error);\r\n      })\r\n    setTimeout(this.todayWeatherForecast, 1000*60*60);\r\n    this.forceUpdate();\r\n  }\r\n  checkDaytime = () => {\r\n    const timeNow = new Date();\r\n    //verificamos se a hora está entre a hora do nascer do sol e a hora do por do sol\r\n    if (timeNow.getHours() > this.state.nascerDoSol.slice(0, 3) && timeNow.getHours() < this.state.porDoSol.slice(0, 3)) {\r\n      return true;\r\n    }\r\n    //verificamos se a hora é igual a hora do nascer do sol\r\n    if (timeNow.getHours() === this.state.nascerDoSol.slice(0, 3)){\r\n      //verificamos se o minuto é maior ou igual o minuto do nascer do sol\r\n      if (timeNow.getMinutes() > this.state.nascerDoSol.slice(4, 6)){\r\n        return true;\r\n      }\r\n      //caso o minuto seja igual, verificamos os segundos\r\n      if (timeNow.getMinutes() === this.state.nascerDoSol.slice(4, 6)){\r\n        //caso o segundo seja maior ou igual\r\n        if (timeNow.getSeconds() >= this.state.nascerDoSol.slice(7, 9)){\r\n          return true;\r\n        }\r\n        //caso o segundo seja menor\r\n        if (timeNow.getSeconds() < this.state.nascerDoSol.slice(7, 9)){\r\n          return false;\r\n        }\r\n      }\r\n      //caso o minuto seja menor que o do nascer do sol\r\n      if (timeNow.getMinutes() < this.state.nascerDoSol.slice(4, 6)){\r\n        return false;\r\n      }\r\n    }\r\n    //verificamos se a hora é igual a hora do por do sol\r\n    if(timeNow.getHours() === this.state.porDoSol.slice(0, 3)) {\r\n    //verificamos se o minuto é menor ou igual o minuto do nascer do sol\r\n      if (timeNow.getMinutes() < this.state.porDoSol.slice(4, 6)){\r\n        return true;\r\n      }\r\n      //caso o minuto seja igual, verificamos os segundos\r\n      if (timeNow.getMinutes() === this.state.porDoSol.slice(4, 6)){\r\n        //caso o segundo seja maior ou igual\r\n        if (timeNow.getSeconds() <= this.state.porDoSol.slice(7, 9)){\r\n          return true;\r\n        }\r\n        //caso o segundo seja menor\r\n        if (timeNow.getSeconds() > this.state.porDoSol.slice(7, 9)){\r\n          return false;\r\n        }\r\n      }\r\n      //caso o minuto seja maior que o do nascer do sol\r\n      if (timeNow.getMinutes() > this.state.porDoSol.slice(4, 6)){\r\n        return false;\r\n      }\r\n    }\r\n    //verificamos se a hora é menor que a hora do nascer do sol ou maior que a hora do por do sol\r\n    if (timeNow.getHours() < this.state.nascerDoSol.slice(0, 3) || timeNow.getHours() > this.state.porDoSol.slice(0, 3)){\r\n      return false\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.requestClimatempo();\r\n    this.requestLioSensors();\r\n    this.requestSunriseSunsetTime();\r\n    this.requestTodayWeatherForecast();\r\n  }\r\n  render (){\r\n    return (\r\n      <div className='left-box'>\r\n        <TempHumi\r\n          temperaturaClimatempo={this.state.temperaturaClimatempo}\r\n          umidadeClimatempo={this.state.umidadeClimatempo}\r\n          temperaturaSEL={this.state.temperaturaSEL}\r\n          umidadeSEL={this.state.umidadeSEL}\r\n          chuvaSEL={this.state.chuvaSEL}\r\n        />\r\n        <WeatherForecast\r\n\r\n        />\r\n        <SunriseSunset\r\n          nascerDoSol={this.state.nascerDoSol}\r\n          porDoSol={this.state.porDoSol}\r\n          duracaoDoDia={this.state.duracaoDoDia}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}